# 电话号码簿后端系统 URL 规划

以下是电话号码簿后端系统中所需的主要 URL 列表，以及每个 URL 需要实现的功能：

## 前端页面

### 1. GET /contacts/unit/{sid}
- **描述**: 根据单位 ID 查询此单位下属所有人员。
- **功能**: 使用单位 ID 进行查询，返回该单位下属的所有联系人信息。

### 2. GET /contacts/{id}
- **描述**: 获取特定联系人的详细信息。
- **功能**: 使用唯一的联系人 ID 进行查询，返回联系人详细信息。

### 3. GET /contacts/search
- **描述**: 按关键字搜索联系人。
- **功能**: 支持按姓名、电话号码等字段进行模糊搜索。

### 4. GET /health
- **描述**: 检查服务器状态。
- **功能**: 返回服务器是否正常运行的状态信息。

# 后端页面

### 5. POST /admin/login
- **描述**: 单位管理员登录。
- **功能**: 需要提供管理员的用户名和密码，验证通过后返回 SID，并设置为 cookie。

### 6. GET /units/belong
- **描述**: 获取当前管理员的下属单位列表。
- **功能**: 根据 cookie 中的 SID 获取对应单位的下属单位信息。

### 7. GET /units/info
- **描述**: 获取特定单位的信息。
- **功能**: 根据 cookie 中的 SID 查询单位信息，返回单位详情。

### 8. POST /units
- **描述**: 添加新单位。
- **功能**: 需要提供单位名称、管理员用户名和密码，验证当前会话中单位 SID 存在，并确保新单位的上级单位为当前 SID。

### 9. PUT /units/{sid}/password
- **描述**: 修改特定单位的管理员密码。
- **功能**: 提供新的密码，需验证 cookie 中 SID 是否为上级单位。

### 10. DELETE /units/{sid}
- **描述**: 删除特定单位。
- **功能**: 使用单位 ID 进行删除操作，需验证 cookie 中 SID 是否为上级单位，同时确保该单位下没有联系人和子单位。

### 11. POST /contacts
- **描述**: 添加新联系人。
- **功能**: 提供姓名、联系电话、工作岗位等信息，验证 cookie 中的 SID 是否与联系人所属单位 ID 相匹配。

### 12. PUT /contacts/{id}
- **描述**: 更新特定联系人的信息。
- **功能**: 使用联系人 ID 进行更新，支持修改姓名、电话号码等字段，需验证 cookie 中的 SID 是否与联系人所属单位 ID 相匹配。

### 13. DELETE /contacts/{id}
- **描述**: 删除特定联系人。
- **功能**: 使用联系人 ID 进行删除操作，需验证 cookie 中的 SID 是否与联系人所属单位 ID 相匹配。


**数据库表结构**

### 1. 表名: units
- `sid`：单位 ID
- `user`：管理员用户名
- `psw`：管理员密码
- `unit`：单位名称
- `belong`：所属上级单位

### 2. 表名: user
- `sid`：用户 ID
- `name`：用户姓名
- `tel1`：联系电话 1
- `tel2`：联系电话 2
- `work`：工作岗位
- `uid`：用户所属单位 ID
- `uname`：用户名
